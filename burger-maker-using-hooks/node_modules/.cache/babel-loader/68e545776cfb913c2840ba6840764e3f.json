{"ast":null,"code":"var _jsxFileName = \"/Users/mk/Desktop/Udemy/React/react-applications/burger-maker-using-hooks/src/features/hoc/WithErrorHandler/WithErrorHandler.js\";\nimport React, { useState, useEffect } from 'react';\nimport ModelComponent from '../../Components/UIElments/Model/ModelComponent';\nimport Aux from '../Aux';\nimport useErrorHandler from '../../../hooks/errorHandler';\n\nconst WithErrorHandlerComponent = (WrappedComponent, axios) => {\n  // WithErrorHandlerComponent\n  return props => {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const [error, seterror] = useState(null);\n    const reqInterceptor = axios.interceptors.request.use(req => {\n      seterror(null);\n      return req;\n    });\n    const resInterceptor = axios.interceptors.response.use(res => res, errorRef => {\n      seterror(errorRef);\n    }); // eslint-disable-next-line react-hooks/rules-of-hooks\n\n    useEffect(() => {\n      return () => {\n        axios.interceptors.request.eject(reqInterceptor);\n        axios.interceptors.response.eject(resInterceptor);\n      };\n    }, [reqInterceptor, resInterceptor]);\n\n    const errorActionHandler = () => {\n      seterror(null);\n    };\n\n    return React.createElement(Aux, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }, React.createElement(ModelComponent, {\n      modalClosed: errorActionHandler,\n      showModal: error,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }, error ? error.message : null), React.createElement(WrappedComponent, Object.assign({}, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    })));\n  };\n};\n\nexport default WithErrorHandlerComponent;","map":{"version":3,"sources":["/Users/mk/Desktop/Udemy/React/react-applications/burger-maker-using-hooks/src/features/hoc/WithErrorHandler/WithErrorHandler.js"],"names":["React","useState","useEffect","ModelComponent","Aux","useErrorHandler","WithErrorHandlerComponent","WrappedComponent","axios","props","error","seterror","reqInterceptor","interceptors","request","use","req","resInterceptor","response","res","errorRef","eject","errorActionHandler","message"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AAEA,OAAOC,cAAP,MAA2B,iDAA3B;AACA,OAAOC,GAAP,MAAgB,QAAhB;AAEA,OAAOC,eAAP,MAA4B,6BAA5B;;AAEA,MAAMC,yBAAyB,GAAG,CAACC,gBAAD,EAAmBC,KAAnB,KAA6B;AAC7D;AACA,SAAOC,KAAK,IAAI;AACd;AACA,UAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAC,IAAD,CAAlC;AAEA,UAAMW,cAAc,GAAGJ,KAAK,CAACK,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAAgCC,GAAD,IAAS;AAC7DL,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACA,aAAOK,GAAP;AACD,KAHsB,CAAvB;AAIA,UAAMC,cAAc,GAAGT,KAAK,CAACK,YAAN,CAAmBK,QAAnB,CAA4BH,GAA5B,CAAiCI,GAAD,IAASA,GAAzC,EAA+CC,QAAD,IAAc;AACjFT,MAAAA,QAAQ,CAACS,QAAD,CAAR;AACD,KAFsB,CAAvB,CARc,CAYd;;AACAlB,IAAAA,SAAS,CAAC,MAAM;AACd,aAAO,MAAM;AACXM,QAAAA,KAAK,CAACK,YAAN,CAAmBC,OAAnB,CAA2BO,KAA3B,CAAiCT,cAAjC;AACAJ,QAAAA,KAAK,CAACK,YAAN,CAAmBK,QAAnB,CAA4BG,KAA5B,CAAkCJ,cAAlC;AACD,OAHD;AAID,KALQ,EAKN,CAACL,cAAD,EAAiBK,cAAjB,CALM,CAAT;;AAOA,UAAMK,kBAAkB,GAAG,MAAM;AAC/BX,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACD,KAFD;;AAIA,WACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,cAAD;AAAgB,MAAA,WAAW,EAAEW,kBAA7B;AAAiD,MAAA,SAAS,EAAEZ,KAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGA,KAAK,GAAGA,KAAK,CAACa,OAAT,GAAmB,IAD3B,CADF,EAKE,oBAAC,gBAAD,oBAAsBd,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OALF,CADF;AASD,GAjCD;AAkCD,CApCD;;AAsCA,eAAeH,yBAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport ModelComponent from '../../Components/UIElments/Model/ModelComponent';\nimport Aux from '../Aux';\n\nimport useErrorHandler from '../../../hooks/errorHandler';\n\nconst WithErrorHandlerComponent = (WrappedComponent, axios) => {\n  // WithErrorHandlerComponent\n  return props => {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const [error, seterror] = useState(null);\n\n    const reqInterceptor = axios.interceptors.request.use((req) => {\n      seterror(null);\n      return req;\n    });\n    const resInterceptor = axios.interceptors.response.use((res) => res, (errorRef) => {\n      seterror(errorRef);\n    });\n\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useEffect(() => {\n      return () => {\n        axios.interceptors.request.eject(reqInterceptor);\n        axios.interceptors.response.eject(resInterceptor);\n      }\n    }, [reqInterceptor, resInterceptor]);\n\n    const errorActionHandler = () => {\n      seterror(null);\n    }\n    \n    return (\n      <Aux>\n        <ModelComponent modalClosed={errorActionHandler} showModal={error}>\n          {error ? error.message : null}\n        </ModelComponent>\n\n        <WrappedComponent {...props}/>\n      </Aux>\n    );\n  }\n}\n\nexport default WithErrorHandlerComponent;"]},"metadata":{},"sourceType":"module"}