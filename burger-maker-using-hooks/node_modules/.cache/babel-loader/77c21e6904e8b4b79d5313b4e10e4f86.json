{"ast":null,"code":"var _jsxFileName = \"/Users/mk/Desktop/Udemy/React/react-applications/burger-maker-using-hooks/src/features/Containers/BurgerBuilder/BurgerBuilder.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as actionTypes from '../../../store/actions/index';\nimport Aux from '../../hoc/Aux';\nimport BurgerComponent from '../Burger/BurgerComponent';\nimport BuildControlsComponent from '../Burger/BuildControls/BuildControlsComponent';\nimport ModelComponent from '../../Components/UIElments/Model/ModelComponent';\nimport OrderSummaryComponent from '../../Containers/Burger/OrderSummary/OrderSummaryComponent';\nimport SpinnerComponent from '../../Components/UIElments/Spinner/Spinner';\nimport WithErrorHandlerComponent from '../../hoc/WithErrorHandler/WithErrorHandler';\nimport OrderxAxios from '../../../axios-orders';\nexport class BurgerBuilderComponent extends Component {\n  constructor() {\n    super();\n\n    this.updateOrderable = ingrediants => {\n      const sum = Object.keys(ingrediants).map(ingrediant => {\n        return ingrediants[ingrediant];\n      }).reduce((acc, nxtValue) => {\n        return acc + nxtValue;\n      }, 0);\n      return sum > 0;\n    };\n\n    this.purchaseCancelledHandler = () => {\n      this.setState({\n        purchasing: false\n      });\n    };\n\n    this.purchaseContinueHandler = () => {\n      this.props.onOrderingInit();\n      this.props.history.push('/checkout');\n    };\n\n    this.state = {\n      purchasing: false,\n      showSpinner: false\n    };\n    this.purchasingHandler = this.purchasingHandler.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.onFetchIngrediants();\n  }\n\n  purchasingHandler() {\n    if (this.props.isAuthenticated) {\n      this.setState({\n        purchasing: true\n      });\n    } else {\n      this.props.onSetRedirectPath('/checkout');\n      this.props.history.push('/auth');\n    }\n  }\n\n  render() {\n    // console.log('props -- ', this.props);\n    const disableInfo = { ...this.props.ings\n    };\n\n    for (let key in disableInfo) {\n      disableInfo[key] = disableInfo[key] <= 0;\n    }\n\n    let orderSummary = null;\n    let burgersElem = this.props.errorRef ? React.createElement(\"p\", {\n      style: {\n        paddingTop: '5rem'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Application can't be used. Sorry :(\") : React.createElement(SpinnerComponent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    });\n\n    if (this.props.ings) {\n      burgersElem = React.createElement(Aux, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(BurgerComponent, {\n        ingrediants: this.props.ings,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(BuildControlsComponent, {\n        isAuthenticated: this.props.isAuthenticated,\n        orderClicked: this.purchasingHandler,\n        orderable: this.updateOrderable(this.props.ings),\n        price: this.props.tPrice,\n        disabled: disableInfo,\n        ingrediantRemoved: this.props.onIngrediantRemoved,\n        ingrediantAdded: this.props.onIngrediantAdded,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }));\n      orderSummary = React.createElement(OrderSummaryComponent, {\n        price: this.props.tPrice,\n        ingrediants: this.props.ings,\n        purchaseCancelled: this.purchaseCancelledHandler,\n        purchaseContineued: this.purchaseContinueHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      });\n\n      if (this.state.showSpinner) {\n        orderSummary = React.createElement(SpinnerComponent, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        });\n      }\n    }\n\n    return React.createElement(Aux, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(ModelComponent, {\n      showModal: this.state.purchasing,\n      modalClosed: this.purchaseCancelledHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, orderSummary), burgersElem);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    ings: state.burger.ingrediants,\n    tPrice: state.burger.totalPrice,\n    errorRef: state.burger.error,\n    isAuthenticated: state.auth.token !== null\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onIngrediantAdded: ingre => dispatch(actionTypes.addIngrediant(ingre)),\n    onIngrediantRemoved: ingre => dispatch(actionTypes.removeIngrediant(ingre)),\n    onFetchIngrediants: () => dispatch(actionTypes.fetchIngrediants()),\n    onOrderingInit: () => dispatch(actionTypes.orderInit()),\n    onSetRedirectPath: path => dispatch(actionTypes.setAuthRedirectPath(path))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WithErrorHandlerComponent(BurgerBuilderComponent, OrderxAxios));","map":{"version":3,"sources":["/Users/mk/Desktop/Udemy/React/react-applications/burger-maker-using-hooks/src/features/Containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","Component","connect","actionTypes","Aux","BurgerComponent","BuildControlsComponent","ModelComponent","OrderSummaryComponent","SpinnerComponent","WithErrorHandlerComponent","OrderxAxios","BurgerBuilderComponent","constructor","updateOrderable","ingrediants","sum","Object","keys","map","ingrediant","reduce","acc","nxtValue","purchaseCancelledHandler","setState","purchasing","purchaseContinueHandler","props","onOrderingInit","history","push","state","showSpinner","purchasingHandler","bind","componentDidMount","onFetchIngrediants","isAuthenticated","onSetRedirectPath","render","disableInfo","ings","key","orderSummary","burgersElem","errorRef","paddingTop","tPrice","onIngrediantRemoved","onIngrediantAdded","mapStateToProps","burger","totalPrice","error","auth","token","mapDispatchToProps","dispatch","ingre","addIngrediant","removeIngrediant","fetchIngrediants","orderInit","path","setAuthRedirectPath"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport { connect } from 'react-redux';\nimport * as actionTypes from '../../../store/actions/index';\n\nimport Aux from '../../hoc/Aux';\nimport BurgerComponent from '../Burger/BurgerComponent';\nimport BuildControlsComponent from '../Burger/BuildControls/BuildControlsComponent';\nimport ModelComponent from '../../Components/UIElments/Model/ModelComponent';\nimport OrderSummaryComponent from '../../Containers/Burger/OrderSummary/OrderSummaryComponent';\nimport SpinnerComponent from '../../Components/UIElments/Spinner/Spinner';\nimport WithErrorHandlerComponent from '../../hoc/WithErrorHandler/WithErrorHandler'; \n\nimport OrderxAxios from '../../../axios-orders';\n\nexport class BurgerBuilderComponent extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      purchasing: false,\n      showSpinner: false,\n    };\n\n    this.purchasingHandler = this.purchasingHandler.bind(this)\n  }\n\n  componentDidMount() {\n    this.props.onFetchIngrediants();\n  }\n\n  updateOrderable = (ingrediants) => {\n    const sum = Object.keys(ingrediants).map((ingrediant) => {\n      return ingrediants[ingrediant];\n    }).reduce((acc, nxtValue) => {\n      return acc + nxtValue;\n    }, 0)\n\n    return sum > 0;\n  }\n\n  purchasingHandler () {\n    if (this.props.isAuthenticated) {\n      this.setState({ purchasing: true });\n    } else {\n      this.props.onSetRedirectPath('/checkout');\n      this.props.history.push('/auth');\n    }\n  }\n\n  purchaseCancelledHandler = () => {\n    this.setState({ purchasing: false })\n  }\n\n  purchaseContinueHandler = () => {\n    this.props.onOrderingInit();\n    this.props.history.push('/checkout');\n  }\n\n  render() {\n    // console.log('props -- ', this.props);\n    const disableInfo = {\n      ...this.props.ings,\n    };\n    for (let key in disableInfo) {\n      disableInfo[key] = disableInfo[key] <= 0;\n    }\n\n    let orderSummary = null;\n    let burgersElem = this.props.errorRef ? <p style={{paddingTop: '5rem'}}>Application can't be used. Sorry :(</p> :\n      (<SpinnerComponent />);\n\n    if (this.props.ings) {\n      burgersElem = (\n        <Aux>\n          <BurgerComponent ingrediants={this.props.ings}/>\n\n          <BuildControlsComponent \n              isAuthenticated={this.props.isAuthenticated}\n              orderClicked={this.purchasingHandler}\n              orderable={this.updateOrderable(this.props.ings)}\n              price={this.props.tPrice}\n              disabled={disableInfo}\n              ingrediantRemoved={this.props.onIngrediantRemoved}\n              ingrediantAdded={this.props.onIngrediantAdded}/>\n        </Aux>\n      );\n\n      orderSummary = (\n        <OrderSummaryComponent\n              price={this.props.tPrice}\n              ingrediants={this.props.ings}\n              purchaseCancelled={this.purchaseCancelledHandler}\n              purchaseContineued={this.purchaseContinueHandler}/>\n      );\n\n      if (this.state.showSpinner) {\n        orderSummary = (<SpinnerComponent />);\n      }\n    }\n\n    return (\n      <Aux>\n        <ModelComponent showModal={this.state.purchasing} modalClosed={this.purchaseCancelledHandler}>\n          {orderSummary}\n        </ModelComponent>\n        \n        {burgersElem}\n      </Aux>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    ings: state.burger.ingrediants,\n    tPrice: state.burger.totalPrice,\n    errorRef: state.burger.error,\n    isAuthenticated: state.auth.token !== null,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onIngrediantAdded: (ingre) => dispatch(actionTypes.addIngrediant(ingre)),\n    onIngrediantRemoved: (ingre) => dispatch(actionTypes.removeIngrediant(ingre)),\n    onFetchIngrediants: () => dispatch(actionTypes.fetchIngrediants()),\n    onOrderingInit: () => dispatch(actionTypes.orderInit()),\n    onSetRedirectPath: (path) => dispatch(actionTypes.setAuthRedirectPath(path)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (WithErrorHandlerComponent(BurgerBuilderComponent, OrderxAxios));"]},"metadata":{},"sourceType":"module"}